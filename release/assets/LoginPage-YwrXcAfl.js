import{n as g,p as y,r as j,o as e}from"./index-CNB927hB.js";import{u as w}from"./AuthStore-DPMOSj-O.js";import{a as b,s as C}from"./axiosUtil-D-9LEqQl.js";import{s as E,F as a,I as p,C as k,B as F}from"./index-Bf_qaFUW.js";import"./index-BP3NYH9n.js";const I=()=>{var n,i;const c=b(),[o,l]=E.useMessage(),m=w(s=>s.changeValue),d=g(),u=((i=(n=y().state)==null?void 0:n.from)==null?void 0:i.pathname)||"/";j.useEffect(()=>{f()},[]);const f=()=>{console.log("Validar")},x=async s=>{try{o.open({type:"loading",content:"Login..",duration:1.5});const t=await c.post("/accounts/login/",{identifier:s==null?void 0:s.username,password:s==null?void 0:s.password});C("token",t.data.token,60*60*24),m({_lastUpdate:new Date,_seconds:5*60,_forceUpdate:!1,_isLoaded:!0,data:{user:t.data,isLogin:!0}}),d(u,{replace:!0}),o.open({type:"success",content:"Success"})}catch(t){console.error("Error[98462]:",t);const r=t;console.error("Error[98462]:",r),r.message=="Network Error"?o.open({type:"error",content:"Network Error"}):r.response&&r.response.status==401?o.open({type:"error",content:r.response.data.error}):o.open({type:"error",content:r.message})}},h=s=>{console.log("Failed:",s)};return e.jsxs(a,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},initialValues:{remember:!0},onFinish:x,onFinishFailed:h,autoComplete:"off",children:[e.jsx(a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:e.jsx(p,{})}),e.jsx(a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:e.jsx(p.Password,{})}),e.jsx(a.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:8,span:16},children:e.jsx(k,{children:"Remember me"})}),e.jsx(a.Item,{wrapperCol:{offset:8,span:16},children:e.jsx(F,{type:"primary",htmlType:"submit",children:"Submit"})}),l]})},_=()=>e.jsx("div",{style:{display:"flex",justifyContent:"center",margin:"40px"},children:e.jsx(I,{})});export{_ as default};
